# Overview

In this repository, I will share some solidity challenges I solve. Feel free to clone it on your local machine and try it yourself. 

## 1. Ticket Marketplace challange

This SC has some vulnerabilities I have commented in the code itself, but there is one major error that allow us to send tickets we don't actually own, but how is this possible? Well, to understand this problem we must understand how parsing works in Solidity. When we convert an integer bigger than 255 into an integer uint8 we just are trunctatting that number. Truncatting means to get just the last 8 bits of the original number. For example, imagine we have the number 300. This number needs 9 bits to be allocated in the memory because is bigger than 2^8. If we convert 300 into binary we get 100101100 (as you can see there are 9 bits). But when we convert this number into an 8 bit integer we just get the last 8 bits, so the first 1 disapear, and we will finally get 00101100 (which is the number 44). 

Now we can return to the original problem: Sending tickets we don't possess. If we look at the `sendTicketsToFriends` function, we can see that the first instruction carries out a truncation. But how can we bypass this function? If we remember that uint8 truncation just gets the last 8 bits of a number, we can try to force the result of friends array length multiplied by quantity to be 256. Why 256? Because we need a number in which the last 8 bits are all 0. If we convert the 256 number into binary, we get 100000000, and if we truncate it, we get 00000000. Then the `totalAmmount` variable will be equal to 0. What about the requires? The first one is easy to bypass because we can add a 2-length array and quantity of 128, then 128x2 = 256. And the second one is also straightforward to bypass because the `totalAmmount' is equal to 0, so we don't need any ticket to overcome this requirement. 

What happens after is that the `totalAmount` variable will be subtracted from our `ticketBalance.` Still, we don't have to worry about this because we are just substracting 0 - 0 = 0, so the function will not revert at this point. Then, inside the loop, we are just adding the quantity of tickets we passed as an argument to the `ticketBalance` our friend account, 128 in our case, so at the end of the loop, all the accounts we passed as arguments will have 128 tickets for free. Notice that we can also add our address to this array because there is no any require that checks the addresses, so we can get these tickets for free. 
